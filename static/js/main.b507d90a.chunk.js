(this["webpackJsonpcg-final-project"]=this["webpackJsonpcg-final-project"]||[]).push([[0],{33:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r,a,c=t(0),o=t(1),i=t.n(o),s=t(23),l=t.n(s),u=t(3),d=t(8),p=t(5),h=t(4),f=t(17),m=t(6),b=(t(31),t(2)),O=new function e(){Object(u.a)(this,e),this.scene=void 0,this.engine=void 0,this.framerate=60,this.character=void 0,this.addBlockModal=void 0,this.currentLevel=void 0,this.codeEngine=void 0},j=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var c;return Object(u.a)(this,t),(c=n.call(this,e)).componentDidMount=function(){c.engine=new b.Engine(c.canvas,!0),O.scene=new b.Scene(c.engine),c.addLight(),c.addCamera(),c.addSkybox(),window.addEventListener("resize",c.onWindowResize,!1),window.addEventListener("keydown",c.onKeydownEvent),c.engine.runRenderLoop((function(){O.scene.render()})),O.scene.registerBeforeRender((function(){}))},c.onWindowResize=function(e){c.engine.resize()},c.onKeydownEvent=function(e){switch(e.keyCode){case 219:O.scene.debugLayer.show();break;case 221:O.scene.debugLayer.hide()}},c.addLight=function(){c.hemisphericLight=new b.HemisphericLight("hemisphericLight",new b.Vector3(0,1,0),O.scene),c.underMapLighting=new b.SpotLight("underMapLight",new b.Vector3(2,-10,2),new b.Vector3(0,1,0),Math.PI,8,O.scene)},c.addSkybox=function(){var e=b.Mesh.CreateSphere("skybox",16,50,r),n=new b.StandardMaterial("skyboxMaterial",r);n.emissiveTexture=new b.Texture("assets/other/skybox.png",O.scene,1,0),n.diffuseColor=new b.Color3(0,0,0),n.specularColor=new b.Color3(0,0,0),n.emissiveTexture.uOffset=-Math.PI/2,n.emissiveTexture.uOffset=.1,n.backFaceCulling=!1,e.material=n},c.addCamera=function(){c.arcRotateCamera=new b.ArcRotateCamera("MainCamera",Math.PI/2,Math.PI/4,10,new b.Vector3(2,0,2),O.scene),c.arcRotateCamera.panningSensibility=0,c.arcRotateCamera.lowerRadiusLimit=c.arcRotateCamera.upperRadiusLimit=10,c.arcRotateCamera.attachControl(c.canvas,!0),c.arcRotateCamera.setPosition(new b.Vector3(7,7,7)),c.arcRotateCamera.beta=Math.PI/2.5},c.addGround=function(){var e=b.MeshBuilder.CreateGround("ground1",{height:6,width:6,subdivisions:2},r),n=new b.StandardMaterial("grass0",r);n.diffuseTexture=new b.Texture("./assets/ground.jpeg",r),e.material=n},c.addModels=function(){(a=b.MeshBuilder.CreateBox("box",{height:1,width:1,depth:1},r)).position.y=1;var e=new b.StandardMaterial("wood",r);e.diffuseTexture=new b.Texture("./assets/portal_cube.png",r),a.material=e},c.state={useWireFrame:!1,shouldAnimate:!1},c.hemisphericLight=void 0,c.underMapLighting=void 0,c.arcRotateCamera=void 0,c}return Object(d.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1)}},{key:"render",value:function(){var e=this;return Object(c.jsx)("canvas",{className:"renderCanvas",ref:function(n){e.canvas=n}})}}]),t}(o.Component),x=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).state={},r}return Object(d.a)(t,[{key:"render",value:function(){return Object(c.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(c.jsx)("a",{className:"navbar-brand",href:"/",children:"REEEE"})})}}]),t}(o.Component),v=t(13),g=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).onChangeSelection=function(e){r.setState({selectedBlockType:e.target.value})},r.onCancelClicked=function(e){r.setState({selectedBlockType:null})},r.onAddButtonClicked=function(){console.log("Adding ".concat(r.state.selectedBlockType," block")),O.codeEngine.addBlock(r.state.selectedBlockType,r.parentBlockIndex)},r.state={selectedBlockType:null},r.parentBlockIndex=-1,O.addBlockModal=Object(v.a)(r),r}return Object(d.a)(t,[{key:"render",value:function(){return Object(c.jsx)("div",{id:"addBlockModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",id:"myModalLabel",children:"Add Function"}),"                        "]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{type:"radio",value:"WALK",checked:"WALK"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(c.jsx)("label",{children:"Walk"}),Object(c.jsx)("input",{type:"radio",value:"TURN",checked:"TURN"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(c.jsx)("label",{children:"Turn"}),Object(c.jsx)("input",{type:"radio",value:"LOOP",checked:"LOOP"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(c.jsx)("label",{children:"Loop"}),Object(c.jsx)("input",{type:"radio",value:"IF",checked:"IF"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(c.jsx)("label",{children:"If"})]})}),Object(c.jsxs)("div",{className:"modal-footer",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",disabled:null===this.state.selectedBlockType,onClick:this.onAddButtonClicked,children:"Add"}),Object(c.jsx)("button",{type:"button",className:"btn btn-light","data-dismiss":"modal",onClick:this.onCancelClicked,children:"Cancel"})]})]})})})}}]),t}(o.Component),k=(t(32),t(33),Object.freeze(new function e(){Object(u.a)(this,e),this.NONE=0,this.STONE=1,this.GRASS=2,this.PATH=3,this.WALKABLE_BLOCKS=[this.PATH,this.GRASS]})),C=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidMount=function(){r.createMesh(),r.applyMaterial(),r.startSpawnAnimation()},r.componentWillUnmount=function(){r.mesh.dispose()},r.createMesh=function(){var e=r.props.posX?r.props.posX:0,n=r.props.posY?r.props.posY:0,t=r.props.posZ?r.props.posZ:0;r.mesh=b.MeshBuilder.CreateBox("stoneBlock_".concat(e,",").concat(n,",").concat(t),{height:1,width:1,depth:1},O.scene),r.mesh.position.x=e,r.mesh.position.y=n,r.mesh.position.z=t},r.applyMaterial=function(){var e=new b.StandardMaterial("StoneBlockMaterial",O.scene);e.diffuseTexture=new b.Texture("assets/textures/stone.png",O.scene),e.diffuseTexture.updateSamplingMode(b.Texture.NEAREST_NEAREST_MIPLINEAR),e.specularColor=new b.Color3(0,0,0),e.backFaceCulling=!1,r.mesh.material=e},r.startSpawnAnimation=function(){var e=new b.Animation("spawnAnimation","scaling",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),n=.2*((r.props.yOffset?r.props.yOffset:0)+(r.props.posY?r.props.posY:0))+1,t=[];t.push({frame:0,value:b.Vector3.Zero()}),t.push({frame:n*O.framerate,value:b.Vector3.Zero()}),t.push({frame:n*O.framerate+.3*O.framerate,value:b.Vector3.One()}),e.setKeys(t),r.mesh.animations.push(e),O.scene.beginAnimation(r.mesh,0,n*O.framerate+.3*O.framerate,!1)},r.render=function(){return Object(c.jsx)("div",{})},r.mesh=void 0,r}return t}(o.Component),y=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidMount=function(){r.createMesh(),r.applyMaterial(),r.startSpawnAnimation()},r.componentWillUnmount=function(){r.mesh.dispose()},r.createMesh=function(){var e=r.props.posX?r.props.posX:0,n=r.props.posY?r.props.posY:0,t=r.props.posZ?r.props.posZ:0;r.mesh=b.MeshBuilder.CreateBox("grassBlock_".concat(e,",").concat(n,",").concat(t),{height:1,width:1,depth:1},O.scene),r.mesh.position.x=e,r.mesh.position.y=n,r.mesh.position.z=t},r.applyMaterial=function(){var e=new b.StandardMaterial("GrassBlockMaterial",O.scene);e.reflectionTexture=new b.CubeTexture("assets/textures/grass/grass",O.scene),e.reflectionTexture.coordinatesMode=b.Texture.SKYBOX_MODE,e.reflectionTexture.updateSamplingMode(b.Texture.NEAREST_NEAREST_MIPLINEAR),e.diffuseColor=new b.Color3(0,0,0),e.specularColor=new b.Color3(0,0,0),e.backFaceCulling=!1,r.mesh.material=e},r.startSpawnAnimation=function(){var e=new b.Animation("spawnAnimation","scaling",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),n=.2*((r.props.yOffset?r.props.yOffset:0)+(r.props.posY?r.props.posY:0))+1,t=[];t.push({frame:0,value:b.Vector3.Zero()}),t.push({frame:n*O.framerate,value:b.Vector3.Zero()}),t.push({frame:n*O.framerate+.3*O.framerate,value:b.Vector3.One()}),e.setKeys(t),r.mesh.animations.push(e),O.scene.beginAnimation(r.mesh,0,n*O.framerate+.3*O.framerate,!1)},r.render=function(){return Object(c.jsx)("div",{})},r.mesh=void 0,r}return t}(o.Component),A=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidMount=function(){r.createMesh()},r.componentWillUnmount=function(){O.character=void 0,r.mesh.dispose(),r.idleAnimation=r.walkingAnimation=null},r.createMesh=function(){var e=r.props.posX?r.props.posX:0,n=r.props.posY?r.props.posY:0,t=r.props.posZ?r.props.posZ:0,a=r.props.faceDirection?r.props.faceDirection:0;r.mesh=b.MeshBuilder.CreateBox("character",{height:1,width:1,depth:1},O.scene);var c=new b.Material("characterParentMaterial");c.alpha=0,r.mesh.position=new b.Vector3(e,n,t),r.mesh.material=c,r.characterModel=b.SceneLoader.ImportMesh("","assets/obj/","character_running.glb",O.scene,(function(c,o,i,s){r.characterModelMeshes=c,r.idleAnimation=s[0],r.walkingAnimation=s[1],c.forEach((function(a){a.scaling=new b.Vector3(.1,.1,.1),a.position=new b.Vector3(e+r.xOffset,n+r.yOffset,t+r.zOffset);var c=new b.StandardMaterial("characterMaterial");c.specularColor=new b.Color3(1,1,1),c.diffuseColor=new b.Color3(1,.6,0),c.backFaceCulling=!1,c.ambientColor=new b.Color3(.23,.98,.53),a.material=c,a.setParent(r.mesh)})),r.characterFaceDirection=a,r.mesh.rotation.y+=.5*Math.PI*a}))},r.walk=function(){var e=r.characterFaceDirection%2===0?"z":"x",n=r.characterFaceDirection>=2?1:-1,t=new b.Animation("characterTurnleft","position.".concat(e),O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),a=[];a.push({frame:0,value:"x"===e?r.mesh.position.x:r.mesh.position.z}),a.push({frame:r.animationSpeed*O.framerate,value:("x"===e?r.mesh.position.x:r.mesh.position.z)+n}),t.setKeys(a),r.mesh.animations.length>0&&r.mesh.animations.pop(),r.mesh.animations.push(t),O.scene.beginAnimation(r.mesh,0,r.animationSpeed*O.framerate,!1),r.idleAnimation.stop(),r.walkingAnimation.start(!1,2,r.walkingAnimation.from,r.walkingAnimation.to,!1),setTimeout((function(){r.walkingAnimation.stop(),r.idleAnimation.start(!0,1,r.idleAnimation.from,r.idleAnimation.to,!1)}),1e3*r.animationSpeed)},r.turnLeft=function(){0===r.characterFaceDirection?r.characterFaceDirection=3:r.characterFaceDirection=Math.abs((r.characterFaceDirection-1)%4),console.log("Rotating player to ".concat(r.characterFaceDirection));var e=new b.Animation("characterTurnleft","rotation.y",O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),n=[];n.push({frame:0,value:r.mesh.rotation.y}),n.push({frame:r.animationSpeed*O.framerate,value:r.mesh.rotation.y-Math.PI/2}),e.setKeys(n),r.mesh.animations.length>0&&r.mesh.animations.pop(),r.mesh.animations.push(e),O.scene.beginAnimation(r.mesh,0,r.animationSpeed*O.framerate,!1)},r.turnRight=function(){r.characterFaceDirection=Math.abs((r.characterFaceDirection+1)%4),console.log("Rotating player to ".concat(r.characterFaceDirection));var e=new b.Animation("characterTurnleft","rotation.y",O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),n=[];n.push({frame:0,value:r.mesh.rotation.y}),n.push({frame:r.animationSpeed*O.framerate,value:r.mesh.rotation.y+Math.PI/2}),e.setKeys(n),r.mesh.animations.length>0&&r.mesh.animations.pop(),r.mesh.animations.push(e),O.scene.beginAnimation(r.mesh,0,r.animationSpeed*O.framerate,!1)},r.render=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:r.walk,children:"Move Forward"}),Object(c.jsx)("button",{onClick:r.turnLeft,children:"Turn Left"}),Object(c.jsx)("button",{onClick:r.turnRight,children:"Turn Right"})]})},r.mesh=void 0,r.characterModel=void 0,r.characterModelMeshes=void 0,r.characterFaceDirection=e.faceDirection,r.xOffset=0,r.yOffset=-.5,r.zOffset=0,r.animationSpeed=.5,r.turnLeftAnimation=void 0,r.idleAnimation=void 0,r.walkingAnimation=void 0,O.character=Object(v.a)(r),r}return t}(o.Component),w=t(12),L=t.n(w),M=t(25),N=t(15),T=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).onButtonClicked=function(){O.addBlockModal.parentBlockIndex=r.props.parentBlockIndex},r.render=function(){return Object(c.jsx)("button",{className:"btnAddBlock","data-toggle":"modal","data-target":"#addBlockModal",onClick:r.onButtonClicked,children:"+"})},r.state={blockCountLimit:null},r}return t}(o.Component),I=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){var e;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).onButtonClicked=function(){window.confirm("Are you sure you want to delete this function?")&&O.codeEngine.deleteBlock(e.props.parentIndex,e.props.index)},e.render=function(){return Object(c.jsx)("button",{className:"btnDeleteBlock",onClick:e.onButtonClicked,children:"-"})},e}return t}(o.Component),S=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){var e;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).render=function(){return Object(c.jsxs)("div",{className:"block function",index:e.props.index,children:[Object(c.jsx)(I,{index:e.props.index,parentIndex:e.props.parentIndex}),Object(c.jsx)("p",{children:"Walk"})]})},e}return t}(o.Component),B=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){var e;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).onSelectionChange=function(n){var t=n.target.value;O.codeEngine.updateBlock(e.props.parentIndex,e.props.index,{direction:t})},e.render=function(){return Object(c.jsxs)("div",{className:"block function",index:e.props.index,children:[Object(c.jsx)(I,{index:e.props.index,parentIndex:e.props.parentIndex}),Object(c.jsx)("p",{children:"Turn"}),Object(c.jsxs)("select",{className:"form-control",value:e.props.direction,onChange:e.onSelectionChange,children:[Object(c.jsx)("option",{value:"-1",children:"Left"}),Object(c.jsx)("option",{value:"1",children:"Right"})]})]})},e}return t}(o.Component),E=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidUpdate=function(){r.updateChildReference()},r.updateChildReference=function(){for(var e=r.props.parentIndex.split(" ").map((function(e){return+e})),n=void 0,t=0;t<e.length;t++)if(-1===e[t])n=O.codeEngine.state.functions;else{if(!n[e[t]])return;n=n[e[t]].children}n[r.props.index]&&(r.currentBlockChildren=n[r.props.index].children)},r.onCycleCountChange=function(e){var n=e.target.value;O.codeEngine.updateBlock(r.props.parentIndex,r.props.index,{loopCycles:n})},r.render=function(){return Object(c.jsxs)("div",{className:"block loop",index:r.props.index,children:[Object(c.jsx)(I,{index:r.props.index,parentIndex:r.props.parentIndex}),Object(c.jsx)("p",{children:"Loop"}),Object(c.jsx)("input",{type:"number",className:"form-control",min:"2",max:"99",onChange:r.onCycleCountChange,value:r.props.loopCycles}),Object(c.jsx)("p",{children:"times"}),Object(c.jsx)("div",{className:"children",children:r.currentBlockChildren.map((function(e,n){return O.codeEngine.renderBlock(e,n,"".concat(r.props.parentIndex," ").concat(r.props.index))}))}),Object(c.jsx)(T,{parentBlockIndex:"".concat(r.props.parentIndex," ").concat(r.props.index)})]})},r.updateChildReference(),r}return t}(o.Component),R=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidUpdate=function(){r.updateChildReference()},r.updateChildReference=function(){for(var e=r.props.parentIndex.split(" ").map((function(e){return+e})),n=void 0,t=0;t<e.length;t++)if(-1===e[t])n=O.codeEngine.state.functions;else{if(!n[e[t]])return;n=n[e[t]].children}n[r.props.index]&&(r.currentBlockChildren=n[r.props.index].children)},r.onOperatorChange=function(e){var n=e.target.value;O.codeEngine.updateBlock(r.props.parentIndex,r.props.index,{operator:n})},r.onLeftOperandChange=function(e){var n=e.target.value;O.codeEngine.updateBlock(r.props.parentIndex,r.props.index,{leftOperand:n})},r.onRightOperandChange=function(e){var n=e.target.value;O.codeEngine.updateBlock(r.props.parentIndex,r.props.index,{rightOperand:n})},r.render=function(){return Object(c.jsxs)("div",{className:"block if",index:r.props.index,children:[Object(c.jsx)(I,{index:r.props.index,parentIndex:r.props.parentIndex}),Object(c.jsx)("p",{children:"If"}),Object(c.jsxs)("div",{className:"options",children:[Object(c.jsx)("select",{className:"form-control operand",name:"leftOperand",value:r.props.leftOperand,onChange:r.onLeftOperandChange,children:O.codeEngine.ifBlockLeftOperandSelection.map((function(e,n){return Object(c.jsx)("option",{value:e.id,children:e.uiText},n)}))}),Object(c.jsxs)("select",{className:"form-control operator",name:"operator",value:r.props.operator,onChange:r.onOperatorChange,children:[Object(c.jsx)("option",{value:"EQUALS",children:"="}),Object(c.jsx)("option",{value:"NOT_EQUALS",children:"!="})]}),Object(c.jsx)("select",{className:"form-control operand",name:"rightOperand",value:r.props.rightOperand,onChange:r.onRightOperandChange,children:O.codeEngine.ifBlockRightOperandSelection.map((function(e,n){return Object(c.jsx)("option",{value:e.id,children:e.uiText},n)}))})]}),Object(c.jsx)("div",{className:"children",children:r.currentBlockChildren.map((function(e,n){return O.codeEngine.renderBlock(e,n,"".concat(r.props.parentIndex," ").concat(r.props.index))}))}),Object(c.jsx)(T,{parentBlockIndex:"".concat(r.props.parentIndex," ").concat(r.props.index)})]})},r.updateChildReference(),r}return t}(o.Component),P=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).componentDidMount=function(){},r.startSimulation=function(e){r.simulate(r.state.functions).then((function(e){e?console.log("Simulation ran successfuly."):console.error("Simulation failed")}))},r.simulate=function(){var e=Object(N.a)(L.a.mark((function e(n){var t,a,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(M.a)(n),e.prev=1,t.s();case 3:if((a=t.n()).done){e.next=35;break}c=a.value,e.t0=c.type,e.next="WALK"===e.t0?8:"TURN"===e.t0?13:"LOOP"===e.t0?18:"IF"===e.t0?23:28;break;case 8:return e.next=10,r.walk();case 10:if(e.sent){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("break",30);case 13:return e.next=15,r.turn(c.direction);case 15:if(e.sent){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("break",30);case 18:return e.next=20,r.loop(c);case 20:if(e.sent){e.next=22;break}return e.abrupt("return",!1);case 22:return e.abrupt("break",30);case 23:return e.next=25,r.if_(c);case 25:if(e.sent){e.next=27;break}return e.abrupt("return",!1);case 27:return e.abrupt("break",30);case 28:return console.error("Invalid block type. Received ".concat(c.type)),e.abrupt("return",!1);case 30:if("LOOP"===c.type){e.next=33;break}return e.next=33,r.delayAction(1e3);case 33:e.next=3;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(1),t.e(e.t1);case 40:return e.prev=40,t.f(),e.finish(40);case 43:return e.abrupt("return",!0);case 44:case"end":return e.stop()}}),e,null,[[1,37,40,43]])})));return function(n){return e.apply(this,arguments)}}(),r.hasReachedGoal=function(){},r.walk=Object(N.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.canWalk()){e.next=2;break}return e.abrupt("return",!1);case 2:return O.character.walk(),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)}))),r.turn=function(){var e=Object(N.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="1"===e.t0?3:"-1"===e.t0?5:7;break;case 3:return O.character.turnRight(),e.abrupt("break",9);case 5:return O.character.turnLeft(),e.abrupt("break",9);case 7:return console.error("Invalid turn direction. Received ".concat(n)),e.abrupt("break",9);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.loop=function(){var e=Object(N.a)(L.a.mark((function e(n){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.loopCycles)){e.next=9;break}return e.next=4,r.simulate(n.children);case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:t++,e.next=1;break;case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.if_=function(){var e=Object(N.a)(L.a.mark((function e(n){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="EQUALS"===n.operator,e.t0=n.leftOperand,e.next="CHARACTER"===e.t0?4:13;break;case 4:e.t1=n.rightOperand,e.next="CAN_WALK"===e.t1?7:11;break;case 7:if(r.canWalk()!==t){e.next=10;break}return e.next=10,r.simulate(n.children);case 10:return e.abrupt("break",12);case 11:console.error("Invalid if right operand. Received",n.rightOperand);case 12:return e.abrupt("break",15);case 13:return console.error("Invalid if left operand. Received",n.leftOperand),e.abrupt("return",!1);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),r.getParentRef=function(e,n){for(var t=n.split(" ").map((function(e){return+e})),r=void 0,a=0;a<t.length;a++)r=-1===t[a]?e:r[t[a]].children;return r},r.addBlock=function(e,n){r.setState((function(t){var a=JSON.parse(JSON.stringify(t.functions)),c=r.getParentRef(a,n);switch(e){case"WALK":c.push({type:"WALK"});break;case"TURN":c.push({type:"TURN",direction:"1"});break;case"LOOP":c.push({type:"LOOP",loopCycles:2,children:[]});break;case"IF":c.push({type:"IF",operator:"EQUALS",leftOperand:"CHARACTER",rightOperand:"CAN_WALK",children:[]});break;default:console.error("Unknown code block type: ".concat(e))}return{functions:a}}),(function(){r.forceUpdate()}))},r.updateBlock=function(e,n,t){r.setState((function(a){var c=JSON.parse(JSON.stringify(a.functions)),o=r.getParentRef(c,e);return Object.keys(t).forEach((function(e){o[n][e]=t[e]})),{functions:c}}),(function(){r.forceUpdate()}))},r.deleteBlock=function(e,n){r.setState((function(t){var a=JSON.parse(JSON.stringify(t.functions));return r.getParentRef(a,e).splice(n,1),{functions:a}}),(function(){r.forceUpdate()}))},r.renderBlock=function(e,n,t){switch(e.type){case"WALK":return Object(c.jsx)(S,{index:n,parentIndex:t},n);case"TURN":return Object(c.jsx)(B,{index:n,parentIndex:t,direction:e.direction},n);case"LOOP":return Object(c.jsx)(E,{index:n,parentIndex:t,loopCycles:e.loopCycles},n);case"IF":return Object(c.jsx)(R,{index:n,parentIndex:t,operator:e.operator,leftOperand:e.leftOperand,rightOperand:e.rightOperand},n);default:return Object(c.jsxs)("div",{children:["Invalid data. Received ",JSON.stringify(e)]})}},r.render=function(){return Object(c.jsxs)("div",{className:"codeEngine",children:[r.state.functions.map((function(e,n){return r.renderBlock(e,n,"-1")})),Object(c.jsx)(T,{parentBlockIndex:"-1"}),Object(c.jsx)("button",{onClick:function(){r.startSimulation()},children:"Start Simulation"})]})},r.state={functions:[],hasBlockCountLimit:!1,blockCountLimit:-1,isRunning:!1},r.CODE_BLOCK_TYPE=Object.freeze({WALK:0,TURN:1,IF:2,LOOP:3}),r.ifBlockLeftOperandSelection=[{id:"CHARACTER",uiText:"character"}],r.ifBlockRightOperandSelection=[{id:"CAN_WALK",uiText:"canWalk"}],O.codeEngine=Object(v.a)(r),r}return Object(d.a)(t,[{key:"delayAction",value:function(e){return new Promise((function(n){return setTimeout(n,e)}))}},{key:"canWalk",value:function(){var e=O.character.mesh.position.x,n=O.character.mesh.position.z;switch(O.character.characterFaceDirection){case 0:n-=1;break;case 1:e-=1;break;case 2:n+=1;break;case 3:e+=1}if(e<0||e>4)return!1;if(n<0||n>4)return!1;var t=O.currentLevel.level[O.currentLevel.yOffset][e][n];return!!k.WALKABLE_BLOCKS.includes(t)}}]),t}(o.Component),D=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){return Object(u.a)(this,t),n.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"titlePanel",children:[Object(c.jsx)("h1",{children:this.props.heading}),Object(c.jsx)("p",{children:this.props.subheading})]})}}]),t}(o.Component),_=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){var e;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).render=function(){return Object(c.jsxs)("div",{className:"instructionsPanel",children:[Object(c.jsx)("div",{className:"instructionsHeading",children:"Instructions"}),Object(c.jsx)("p",{children:e.props.children})]})},e}return t}(o.Component),F=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(e){var r;return Object(u.a)(this,t),(r=n.call(this,e)).state={environmentSpawned:!1},r.level=[[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]],[[0,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0]],[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]],[[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2]]],r.yOffset=3,O.currentLevel=Object(v.a)(r),r}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"spawnEnvironmentItem",value:function(e,n,t,r){switch(n-=this.yOffset,r){case k.NONE:return Object(c.jsx)("div",{});case k.STONE:return Object(c.jsx)(C,{posX:e,posY:n,posZ:t,yOffset:this.yOffset});case k.GRASS:return Object(c.jsx)(y,{posX:e,posY:n,posZ:t,yOffset:this.yOffset});default:return Object(c.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"levelPanel",children:[Object(c.jsx)(D,{heading:"Level One",subheading:"The Basics"}),Object(c.jsx)(P,{}),Object(c.jsxs)(_,{children:[Object(c.jsx)("b",{children:"Welcome to your first level!"}),Object(c.jsx)("br",{}),"To complete this level, you need to walk the character to the finish line using functions. To add a function, press the plus button above."]})]}),this.level.map((function(n,t){return Object(c.jsxs)("div",{className:"env_y_".concat(t),children:[" ",n.map((function(n,r){return Object(c.jsxs)("div",{className:"env_x_".concat(r),children:[" ",n.map((function(n,a){return Object(c.jsxs)("div",{className:"env_z_".concat(a),children:[" ",e.spawnEnvironmentItem(r,t,a,n)," "]},a)}))," "]},r)}))," "]},t)})),Object(c.jsx)(A,{posX:0,posY:1,posZ:0,faceDirection:2}),Object(c.jsx)("button",{"data-toggle":"modal","data-target":"#addBlockModal",className:"btn btn-sm text-white btn-success mr-2",children:"TEST ADD BLOCK MODAL"})]})}}]),t}(o.Component),W=function(e){Object(p.a)(t,e);var n=Object(h.a)(t);function t(){var e;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={},e}return Object(d.a)(t,[{key:"render",value:function(){return Object(c.jsxs)(f.a,{children:[Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(x,{}),Object(c.jsxs)("ul",{style:{color:"white"},children:[Object(c.jsx)("li",{children:"Show Debugger: ["}),Object(c.jsx)("li",{children:"Hide Debugger: ]"}),Object(c.jsx)("li",{children:Object(c.jsx)(f.b,{to:"/cg-final-project/",children:"Load Main Menu"})}),Object(c.jsx)("li",{children:Object(c.jsx)(f.b,{to:"/cg-final-project/level-1",children:"Load Level 1"})})]}),Object(c.jsxs)("div",{className:"AppContainer",children:[Object(c.jsx)(j,{}),Object(c.jsx)(m.c,{className:"LevelContainer",children:Object(c.jsx)(m.a,{path:"/cg-final-project/level-1",children:Object(c.jsx)(F,{})})})]})]}),Object(c.jsx)(g,{})]})}}]),t}(o.Component),Y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))};l.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(W,{})}),document.getElementById("root")),Y()}},[[42,1,2]]]);
//# sourceMappingURL=main.b507d90a.chunk.js.map