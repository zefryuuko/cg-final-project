(this["webpackJsonpcg-final-project"]=this["webpackJsonpcg-final-project"]||[]).push([[0],{33:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a,r,o=n(0),i=n(2),c=n.n(i),s=n(23),p=n.n(s),l=n(3),u=n(8),d=n(5),h=n(4),f=n(17),m=n(6),b=(n(31),n(1)),O=new function e(){Object(l.a)(this,e),this.scene=void 0,this.engine=void 0,this.framerate=60,this.character=void 0,this.addBlockModal=void 0,this.currentLevel=void 0,this.codeEngine=void 0},j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).componentDidMount=function(){o.engine=new b.Engine(o.canvas,!0),O.scene=new b.Scene(o.engine),o.addLight(),o.addCamera(),o.addSkybox(),window.addEventListener("resize",o.onWindowResize,!1),window.addEventListener("keydown",o.onKeydownEvent),o.engine.runRenderLoop((function(){O.scene.render()})),O.scene.registerBeforeRender((function(){}))},o.onWindowResize=function(e){o.engine.resize()},o.onKeydownEvent=function(e){switch(e.keyCode){case 219:O.scene.debugLayer.show();break;case 221:O.scene.debugLayer.hide()}},o.addLight=function(){o.hemisphericLight=new b.HemisphericLight("hemisphericLight",new b.Vector3(0,1,0),O.scene),o.underMapLighting=new b.SpotLight("underMapLight",new b.Vector3(2,-10,2),new b.Vector3(0,1,0),Math.PI,8,O.scene)},o.addSkybox=function(){var e=b.Mesh.CreateSphere("skybox",16,50,a),t=new b.StandardMaterial("skyboxMaterial",a);t.emissiveTexture=new b.Texture("assets/other/skybox.png",O.scene,1,0),t.diffuseColor=new b.Color3(0,0,0),t.specularColor=new b.Color3(0,0,0),t.emissiveTexture.uOffset=-Math.PI/2,t.emissiveTexture.uOffset=.1,t.backFaceCulling=!1,e.material=t},o.addCamera=function(){o.arcRotateCamera=new b.ArcRotateCamera("MainCamera",Math.PI/2,Math.PI/4,10,new b.Vector3(2,0,2),O.scene),o.arcRotateCamera.panningSensibility=0,o.arcRotateCamera.lowerRadiusLimit=o.arcRotateCamera.upperRadiusLimit=10,o.arcRotateCamera.attachControl(o.canvas,!0),o.arcRotateCamera.setPosition(new b.Vector3(7,7,7)),o.arcRotateCamera.beta=Math.PI/2.5},o.addGround=function(){var e=b.MeshBuilder.CreateGround("ground1",{height:6,width:6,subdivisions:2},a),t=new b.StandardMaterial("grass0",a);t.diffuseTexture=new b.Texture("./assets/ground.jpeg",a),e.material=t},o.addModels=function(){(r=b.MeshBuilder.CreateBox("box",{height:1,width:1,depth:1},a)).position.y=1;var e=new b.StandardMaterial("wood",a);e.diffuseTexture=new b.Texture("./assets/portal_cube.png",a),r.material=e},o.state={useWireFrame:!1,shouldAnimate:!1},o.hemisphericLight=void 0,o.underMapLighting=void 0,o.arcRotateCamera=void 0,o}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize,!1)}},{key:"render",value:function(){var e=this;return Object(o.jsx)("canvas",{className:"renderCanvas",ref:function(t){e.canvas=t}})}}]),n}(i.Component),v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(o.jsx)("a",{className:"navbar-brand",href:"/",children:"REEEE"})})}}]),n}(i.Component),x=n(13),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChangeSelection=function(e){a.setState({selectedBlockType:e.target.value})},a.onCancelClicked=function(e){a.setState({selectedBlockType:null})},a.onAddButtonClicked=function(){console.log("Adding ".concat(a.state.selectedBlockType," block")),O.codeEngine.addBlock(a.state.selectedBlockType,a.parentBlockIndex)},a.state={selectedBlockType:null},a.parentBlockIndex=-1,O.addBlockModal=Object(x.a)(a),a}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsx)("div",{id:"addBlockModal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true",children:Object(o.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsx)("h4",{className:"modal-title",id:"myModalLabel",children:"Add Function"}),"                        "]}),Object(o.jsx)("div",{className:"modal-body",children:Object(o.jsxs)("form",{children:[Object(o.jsx)("input",{type:"radio",value:"WALK",checked:"WALK"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(o.jsx)("label",{children:"Walk"}),Object(o.jsx)("input",{type:"radio",value:"TURN",checked:"TURN"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(o.jsx)("label",{children:"Turn"}),Object(o.jsx)("input",{type:"radio",value:"LOOP",checked:"LOOP"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(o.jsx)("label",{children:"Loop"}),Object(o.jsx)("input",{type:"radio",value:"IF",checked:"IF"===this.state.selectedBlockType,onChange:this.onChangeSelection}),Object(o.jsx)("label",{children:"If"})]})}),Object(o.jsxs)("div",{className:"modal-footer",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-success","data-dismiss":"modal",disabled:null===this.state.selectedBlockType,onClick:this.onAddButtonClicked,children:"Add"}),Object(o.jsx)("button",{type:"button",className:"btn btn-light","data-dismiss":"modal",onClick:this.onCancelClicked,children:"Cancel"})]})]})})})}}]),n}(i.Component),C=(n(32),n(33),Object.freeze(new function e(){Object(l.a)(this,e),this.NONE=0,this.STONE=1,this.GRASS=2,this.PATH=3,this.OBJECTIVE=99,this.WALKABLE_BLOCKS=[this.PATH,this.GRASS]})),k=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.createMesh(),a.applyMaterial(),a.startSpawnAnimation()},a.componentWillUnmount=function(){a.mesh.dispose()},a.createMesh=function(){var e=a.props.posX?a.props.posX:0,t=a.props.posY?a.props.posY:0,n=a.props.posZ?a.props.posZ:0;a.mesh=b.MeshBuilder.CreateBox("stoneBlock_".concat(e,",").concat(t,",").concat(n),{height:1,width:1,depth:1},O.scene),a.mesh.position.x=e,a.mesh.position.y=t,a.mesh.position.z=n},a.applyMaterial=function(){var e=new b.StandardMaterial("StoneBlockMaterial",O.scene);e.diffuseTexture=new b.Texture("assets/textures/stone.png",O.scene),e.diffuseTexture.updateSamplingMode(b.Texture.NEAREST_NEAREST_MIPLINEAR),e.specularColor=new b.Color3(0,0,0),e.backFaceCulling=!1,a.mesh.material=e},a.startSpawnAnimation=function(){var e=new b.Animation("spawnAnimation","scaling",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=.2*((a.props.yOffset?a.props.yOffset:0)+(a.props.posY?a.props.posY:0))+1,n=[];n.push({frame:0,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate+.3*O.framerate,value:b.Vector3.One()}),e.setKeys(n),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,t*O.framerate+.3*O.framerate,!1)},a.render=function(){return Object(o.jsx)("div",{})},a.mesh=void 0,a}return n}(i.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.createMesh(),a.applyMaterial(),a.startSpawnAnimation()},a.componentWillUnmount=function(){a.mesh.dispose()},a.createMesh=function(){var e=a.props.posX?a.props.posX:0,t=a.props.posY?a.props.posY:0,n=a.props.posZ?a.props.posZ:0;a.mesh=b.MeshBuilder.CreateBox("grassBlock_".concat(e,",").concat(t,",").concat(n),{height:1,width:1,depth:1},O.scene),a.mesh.position.x=e,a.mesh.position.y=t,a.mesh.position.z=n},a.applyMaterial=function(){var e=new b.StandardMaterial("GrassBlockMaterial",O.scene);e.reflectionTexture=new b.CubeTexture("assets/textures/grass/grass",O.scene),e.reflectionTexture.coordinatesMode=b.Texture.SKYBOX_MODE,e.reflectionTexture.updateSamplingMode(b.Texture.NEAREST_NEAREST_MIPLINEAR),e.diffuseColor=new b.Color3(0,0,0),e.specularColor=new b.Color3(0,0,0),e.backFaceCulling=!1,a.mesh.material=e},a.startSpawnAnimation=function(){var e=new b.Animation("spawnAnimation","scaling",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=.2*((a.props.yOffset?a.props.yOffset:0)+(a.props.posY?a.props.posY:0))+1,n=[];n.push({frame:0,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate+.3*O.framerate,value:b.Vector3.One()}),e.setKeys(n),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,t*O.framerate+.3*O.framerate,!1)},a.render=function(){return Object(o.jsx)("div",{})},a.mesh=void 0,a}return n}(i.Component),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.createMesh()},a.componentWillUnmount=function(){O.character=void 0,a.mesh.dispose(),a.idleAnimation=a.walkingAnimation=null},a.createMesh=function(){var e=a.props.posX?a.props.posX:0,t=a.props.posY?a.props.posY:0,n=a.props.posZ?a.props.posZ:0,r=a.props.faceDirection?a.props.faceDirection:0;a.mesh=b.MeshBuilder.CreateBox("character",{height:1,width:1,depth:1},O.scene);var o=new b.Material("characterParentMaterial");o.alpha=0,a.mesh.position=new b.Vector3(e,t,n),a.mesh.material=o,a.characterModel=b.SceneLoader.ImportMesh("","assets/obj/","character_running.glb",O.scene,(function(o,i,c,s){a.characterModelMeshes=o,a.idleAnimation=s[0],a.walkingAnimation=s[1],o.forEach((function(r){r.scaling=new b.Vector3(.1,.1,.1),r.position=new b.Vector3(e+a.xOffset,t+a.yOffset,n+a.zOffset);var o=new b.StandardMaterial("characterMaterial");o.specularColor=new b.Color3(1,1,1),o.diffuseColor=new b.Color3(1,.6,0),o.backFaceCulling=!1,o.ambientColor=new b.Color3(.23,.98,.53),r.material=o,r.setParent(a.mesh)})),a.characterFaceDirection=r,a.mesh.rotation.y+=.5*Math.PI*r,a.startSpawnAnimation()}))},a.startSpawnAnimation=function(){var e=.2*((a.props.yOffset?a.props.yOffset:0)+(a.props.posY?a.props.posY:0))+1,t=new b.Animation("spawnAnimation","position",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),n=[];n.push({frame:0,value:new b.Vector3(a.props.posX,100,a.props.posZ)}),n.push({frame:e*O.framerate+.1*O.framerate-1,value:new b.Vector3(a.props.posX,100,a.props.posZ)}),n.push({frame:e*O.framerate+.1*O.framerate,value:new b.Vector3(a.props.posX,a.props.posY+.5,a.props.posZ)}),n.push({frame:e*O.framerate+.3*O.framerate,value:new b.Vector3(a.props.posX,a.props.posY,a.props.posZ)}),t.setKeys(n),a.mesh.animations.push(t),O.scene.beginAnimation(a.mesh,0,e*O.framerate+.3*O.framerate,!1)},a.walk=function(){var e=a.characterFaceDirection%2===0?"z":"x",t=a.characterFaceDirection>=2?1:-1,n=new b.Animation("characterTurnleft","position.".concat(e),O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),r=[];r.push({frame:0,value:"x"===e?a.mesh.position.x:a.mesh.position.z}),r.push({frame:a.animationSpeed*O.framerate,value:("x"===e?a.mesh.position.x:a.mesh.position.z)+t}),n.setKeys(r),a.mesh.animations.length>0&&a.mesh.animations.pop(),a.mesh.animations.push(n),O.scene.beginAnimation(a.mesh,0,a.animationSpeed*O.framerate,!1),a.idleAnimation.stop(),a.walkingAnimation.start(!1,2,a.walkingAnimation.from,a.walkingAnimation.to,!1),setTimeout((function(){a.walkingAnimation.stop(),a.idleAnimation.start(!0,1,a.idleAnimation.from,a.idleAnimation.to,!1)}),1e3*a.animationSpeed)},a.turnLeft=function(){0===a.characterFaceDirection?a.characterFaceDirection=3:a.characterFaceDirection=Math.abs((a.characterFaceDirection-1)%4),console.log("Rotating player to ".concat(a.characterFaceDirection));var e=new b.Animation("characterTurnleft","rotation.y",O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=[];t.push({frame:0,value:a.mesh.rotation.y}),t.push({frame:a.animationSpeed*O.framerate,value:a.mesh.rotation.y-Math.PI/2}),e.setKeys(t),a.mesh.animations.length>0&&a.mesh.animations.pop(),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,a.animationSpeed*O.framerate,!1)},a.turnRight=function(){a.characterFaceDirection=Math.abs((a.characterFaceDirection+1)%4),console.log("Rotating player to ".concat(a.characterFaceDirection));var e=new b.Animation("characterTurnleft","rotation.y",O.framerate,b.Animation.ANIMATIONTYPE_FLOAT,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=[];t.push({frame:0,value:a.mesh.rotation.y}),t.push({frame:a.animationSpeed*O.framerate,value:a.mesh.rotation.y+Math.PI/2}),e.setKeys(t),a.mesh.animations.length>0&&a.mesh.animations.pop(),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,a.animationSpeed*O.framerate,!1)},a.respawn=function(){var e=new b.Animation("characterRespawnPosition","position",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=[];t.push({frame:0,value:a.mesh.position}),t.push({frame:.2*O.framerate,value:new b.Vector3(a.mesh.position.x,1.5,a.mesh.position.z)}),t.push({frame:.2*O.framerate+1,value:new b.Vector3(a.mesh.position.x,1.5,a.mesh.position.z)}),t.push({frame:.4*O.framerate,value:new b.Vector3(a.props.posX,1.5,a.props.posZ)}),t.push({frame:.7*O.framerate,value:new b.Vector3(a.props.posX,a.props.posY,a.props.posZ)}),e.setKeys(t),a.mesh.animations.length>0&&a.mesh.animations.pop(),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,.8*O.framerate,!1),a.mesh.rotation.y=.5*Math.PI*a.props.faceDirection,a.characterFaceDirection=a.props.faceDirection},a.render=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:a.walk,children:"Move Forward"}),Object(o.jsx)("button",{onClick:a.turnLeft,children:"Turn Left"}),Object(o.jsx)("button",{onClick:a.turnRight,children:"Turn Right"})]})},a.mesh=void 0,a.characterModel=void 0,a.characterModelMeshes=void 0,a.characterFaceDirection=e.faceDirection,a.xOffset=0,a.yOffset=-.5,a.zOffset=0,a.animationSpeed=.5,a.turnLeftAnimation=void 0,a.idleAnimation=void 0,a.walkingAnimation=void 0,O.character=Object(x.a)(a),a}return n}(i.Component),w=n(12),M=n.n(w),L=n(25),T=n(15),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onButtonClicked=function(){O.addBlockModal.parentBlockIndex=a.props.parentBlockIndex},a.render=function(){var e=a.props.parent?"parentAddBlock":null;return Object(o.jsx)("button",{className:"btnAddBlock ".concat(e),"data-toggle":"modal","data-target":"#addBlockModal",onClick:a.onButtonClicked,disabled:a.props.disabled,children:"+"})},a.state={blockCountLimit:null},a}return n}(i.Component),I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"winScreen",children:[Object(o.jsx)("h1",{children:"Level Passed!"}),this.props.children,Object(o.jsx)("p",{children:"Congratulations! You passed the first level."}),Object(o.jsx)("button",{className:"btn btn-lg btn-success",children:this.props.buttonText?this.props.buttonText:"Next Level"})]})}}]),n}(i.Component),E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onButtonClicked=function(){window.confirm("Are you sure you want to delete this function?")&&O.codeEngine.deleteBlock(e.props.parentIndex,e.props.index)},e.render=function(){return Object(o.jsx)("button",{className:"btnDeleteBlock",onClick:e.onButtonClicked,disabled:e.props.disabled,children:"-"})},e}return n}(i.Component),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(o.jsxs)("div",{className:"block function",index:e.props.index,children:[Object(o.jsx)(E,{index:e.props.index,parentIndex:e.props.parentIndex,disabled:e.props.disabled}),Object(o.jsx)("p",{children:"Walk"})]})},e}return n}(i.Component),B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSelectionChange=function(t){var n=t.target.value;O.codeEngine.updateBlock(e.props.parentIndex,e.props.index,{direction:n})},e.render=function(){return Object(o.jsxs)("div",{className:"block function",index:e.props.index,children:[Object(o.jsx)(E,{index:e.props.index,parentIndex:e.props.parentIndex,disabled:e.props.disabled}),Object(o.jsx)("p",{children:"Turn"}),Object(o.jsxs)("select",{className:"form-control",value:e.props.direction,onChange:e.onSelectionChange,disabled:e.props.disabled,children:[Object(o.jsx)("option",{value:"-1",children:"Left"}),Object(o.jsx)("option",{value:"1",children:"Right"})]})]})},e}return n}(i.Component),R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidUpdate=function(){a.updateChildReference()},a.updateChildReference=function(){for(var e=a.props.parentIndex.split(" ").map((function(e){return+e})),t=void 0,n=0;n<e.length;n++)if(-1===e[n])t=O.codeEngine.state.functions;else{if(!t[e[n]])return;t=t[e[n]].children}t[a.props.index]&&(a.currentBlockChildren=t[a.props.index].children)},a.onCycleCountChange=function(e){var t=e.target.value;O.codeEngine.updateBlock(a.props.parentIndex,a.props.index,{loopCycles:t})},a.render=function(){return Object(o.jsxs)("div",{className:"block loop",index:a.props.index,children:[Object(o.jsx)(E,{index:a.props.index,parentIndex:a.props.parentIndex,disabled:a.props.disabled}),Object(o.jsx)("p",{children:"Loop"}),Object(o.jsx)("input",{type:"number",className:"form-control",min:"2",max:"99",onChange:a.onCycleCountChange,value:a.props.loopCycles,disabled:a.props.disabled}),Object(o.jsx)("p",{children:"times"}),Object(o.jsx)("div",{className:"children",children:a.currentBlockChildren.map((function(e,t){return O.codeEngine.renderBlock(e,t,"".concat(a.props.parentIndex," ").concat(a.props.index))}))}),Object(o.jsx)(N,{parentBlockIndex:"".concat(a.props.parentIndex," ").concat(a.props.index),disabled:a.props.disabled})]})},a.updateChildReference(),a}return n}(i.Component),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidUpdate=function(){a.updateChildReference()},a.updateChildReference=function(){for(var e=a.props.parentIndex.split(" ").map((function(e){return+e})),t=void 0,n=0;n<e.length;n++)if(-1===e[n])t=O.codeEngine.state.functions;else{if(!t[e[n]])return;t=t[e[n]].children}t[a.props.index]&&(a.currentBlockChildren=t[a.props.index].children)},a.onOperatorChange=function(e){var t=e.target.value;O.codeEngine.updateBlock(a.props.parentIndex,a.props.index,{operator:t})},a.onLeftOperandChange=function(e){var t=e.target.value;O.codeEngine.updateBlock(a.props.parentIndex,a.props.index,{leftOperand:t})},a.onRightOperandChange=function(e){var t=e.target.value;O.codeEngine.updateBlock(a.props.parentIndex,a.props.index,{rightOperand:t})},a.render=function(){return Object(o.jsxs)("div",{className:"block if",index:a.props.index,children:[Object(o.jsx)(E,{index:a.props.index,parentIndex:a.props.parentIndex,disabled:a.props.disabled}),Object(o.jsx)("p",{children:"If"}),Object(o.jsxs)("div",{className:"options",children:[Object(o.jsx)("select",{className:"form-control operand",name:"leftOperand",value:a.props.leftOperand,onChange:a.onLeftOperandChange,disabled:a.props.disabled,children:O.codeEngine.ifBlockLeftOperandSelection.map((function(e,t){return Object(o.jsx)("option",{value:e.id,children:e.uiText},t)}))}),Object(o.jsxs)("select",{className:"form-control operator",name:"operator",value:a.props.operator,onChange:a.onOperatorChange,disabled:a.props.disabled,children:[Object(o.jsx)("option",{value:"EQUALS",children:"="}),Object(o.jsx)("option",{value:"NOT_EQUALS",children:"!="})]}),Object(o.jsx)("select",{className:"form-control operand",name:"rightOperand",value:a.props.rightOperand,onChange:a.onRightOperandChange,disabled:a.props.disabled,children:O.codeEngine.ifBlockRightOperandSelection.map((function(e,t){return Object(o.jsx)("option",{value:e.id,children:e.uiText},t)}))})]}),Object(o.jsx)("div",{className:"children",children:a.currentBlockChildren.map((function(e,t){return O.codeEngine.renderBlock(e,t,"".concat(a.props.parentIndex," ").concat(a.props.index))}))}),Object(o.jsx)(N,{parentBlockIndex:"".concat(a.props.parentIndex," ").concat(a.props.index),disabled:a.props.disabled})]})},a.updateChildReference(),a}return n}(i.Component),D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){},a.startSimulation=function(e){a.setState({isRunning:!0},(function(){a.forceUpdate()})),a.simulate(a.state.functions).then((function(e){if(e){var t=O.character.mesh.position;O.currentLevel.level[t.y+a.props.yOffset][t.x][t.z]===C.OBJECTIVE?a.finishLevel():a.resetLevel()}else a.resetLevel()}))},a.finishLevel=function(){console.log("Simulation ran successfuly."),a.setState({isRunning:!1,isObjectiveReached:!0},(function(){a.forceUpdate()}))},a.resetLevel=function(){console.error("Simulation failed"),O.character.respawn(),a.setState({isRunning:!1},(function(){a.forceUpdate()}))},a.simulate=function(){var e=Object(T.a)(M.a.mark((function e(t){var n,r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(L.a)(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=35;break}o=r.value,e.t0=o.type,e.next="WALK"===e.t0?8:"TURN"===e.t0?13:"LOOP"===e.t0?18:"IF"===e.t0?23:28;break;case 8:return e.next=10,a.walk();case 10:if(e.sent){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("break",30);case 13:return e.next=15,a.turn(o.direction);case 15:if(e.sent){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("break",30);case 18:return e.next=20,a.loop(o);case 20:if(e.sent){e.next=22;break}return e.abrupt("return",!1);case 22:return e.abrupt("break",30);case 23:return e.next=25,a.if_(o);case 25:if(e.sent){e.next=27;break}return e.abrupt("return",!1);case 27:return e.abrupt("break",30);case 28:return console.error("Invalid block type. Received ".concat(o.type)),e.abrupt("return",!1);case 30:if("LOOP"===o.type){e.next=33;break}return e.next=33,a.delayAction(1e3);case 33:e.next=3;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(1),n.e(e.t1);case 40:return e.prev=40,n.f(),e.finish(40);case 43:return e.abrupt("return",!0);case 44:case"end":return e.stop()}}),e,null,[[1,37,40,43]])})));return function(t){return e.apply(this,arguments)}}(),a.hasReachedGoal=function(){},a.walk=Object(T.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.canWalk()){e.next=2;break}return e.abrupt("return",!1);case 2:return O.character.walk(),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)}))),a.turn=function(){var e=Object(T.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="1"===e.t0?3:"-1"===e.t0?5:7;break;case 3:return O.character.turnRight(),e.abrupt("break",9);case 5:return O.character.turnLeft(),e.abrupt("break",9);case 7:return console.error("Invalid turn direction. Received ".concat(t)),e.abrupt("break",9);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loop=function(){var e=Object(T.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.loopCycles)){e.next=9;break}return e.next=4,a.simulate(t.children);case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:n++,e.next=1;break;case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.if_=function(){var e=Object(T.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="EQUALS"===t.operator,e.t0=t.leftOperand,e.next="CHARACTER"===e.t0?4:15;break;case 4:e.t1=t.rightOperand,e.next="CAN_WALK"===e.t1?7:13;break;case 7:if(a.canWalk()!==n){e.next=12;break}return e.next=10,a.simulate(t.children);case 10:if(e.sent){e.next=12;break}return e.abrupt("return",!1);case 12:return e.abrupt("break",14);case 13:console.error("Invalid if right operand. Received",t.rightOperand);case 14:return e.abrupt("break",17);case 15:return console.error("Invalid if left operand. Received",t.leftOperand),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getParentRef=function(e,t){for(var n=t.split(" ").map((function(e){return+e})),a=void 0,r=0;r<n.length;r++)a=-1===n[r]?e:a[n[r]].children;return a},a.addBlock=function(e,t){a.setState((function(n){var r=JSON.parse(JSON.stringify(n.functions)),o=a.getParentRef(r,t);switch(e){case"WALK":o.push({type:"WALK"});break;case"TURN":o.push({type:"TURN",direction:"1"});break;case"LOOP":o.push({type:"LOOP",loopCycles:2,children:[]});break;case"IF":o.push({type:"IF",operator:"EQUALS",leftOperand:"CHARACTER",rightOperand:"CAN_WALK",children:[]});break;default:console.error("Unknown code block type: ".concat(e))}return{functions:r}}),(function(){a.forceUpdate()}))},a.updateBlock=function(e,t,n){a.setState((function(r){var o=JSON.parse(JSON.stringify(r.functions)),i=a.getParentRef(o,e);return Object.keys(n).forEach((function(e){i[t][e]=n[e]})),{functions:o}}),(function(){a.forceUpdate()}))},a.deleteBlock=function(e,t){a.setState((function(n){var r=JSON.parse(JSON.stringify(n.functions));return a.getParentRef(r,e).splice(t,1),{functions:r}}),(function(){a.forceUpdate()}))},a.renderBlock=function(e,t,n){switch(e.type){case"WALK":return Object(o.jsx)(S,{index:t,parentIndex:n,disabled:a.state.isRunning},t);case"TURN":return Object(o.jsx)(B,{index:t,parentIndex:n,direction:e.direction,disabled:a.state.isRunning},t);case"LOOP":return Object(o.jsx)(R,{index:t,parentIndex:n,loopCycles:e.loopCycles,disabled:a.state.isRunning},t);case"IF":return Object(o.jsx)(P,{index:t,parentIndex:n,operator:e.operator,leftOperand:e.leftOperand,rightOperand:e.rightOperand,disabled:a.state.isRunning},t);default:return Object(o.jsxs)("div",{children:["Invalid data. Received ",JSON.stringify(e)]})}},a.render=function(){return Object(o.jsx)("div",{className:"codeEngine",children:a.state.isObjectiveReached?Object(o.jsx)(I,{}):Object(o.jsxs)("div",{children:[a.state.functions.map((function(e,t){return a.renderBlock(e,t,"-1")})),Object(o.jsx)(N,{parentBlockIndex:"-1",disabled:a.state.isRunning,parent:"1"}),Object(o.jsx)("button",{className:"btn btn-info startSimulation",onClick:function(){a.startSimulation()},disabled:a.state.isRunning,children:"Start Simulation"})]})})},a.state={functions:[],hasBlockCountLimit:!1,blockCountLimit:-1,isRunning:!1,isObjectiveReached:!1},a.CODE_BLOCK_TYPE=Object.freeze({WALK:0,TURN:1,IF:2,LOOP:3}),a.ifBlockLeftOperandSelection=[{id:"CHARACTER",uiText:"character"}],a.ifBlockRightOperandSelection=[{id:"CAN_WALK",uiText:"canWalk"}],O.codeEngine=Object(x.a)(a),a}return Object(u.a)(n,[{key:"delayAction",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"canWalk",value:function(){var e=O.character.mesh.position.x,t=O.character.mesh.position.z;switch(O.character.characterFaceDirection){case 0:t-=1;break;case 1:e-=1;break;case 2:t+=1;break;case 3:e+=1}if(e<0||e>4)return!1;if(t<0||t>4)return!1;var n=O.currentLevel.level[O.currentLevel.yOffset][e][t];return!!C.WALKABLE_BLOCKS.includes(n)}}]),n}(i.Component),Y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"titlePanel",children:[Object(o.jsx)("h1",{children:this.props.heading}),Object(o.jsx)("p",{children:this.props.subheading})]})}}]),n}(i.Component),_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(o.jsxs)("div",{className:"instructionsPanel",children:[Object(o.jsx)("div",{className:"instructionsHeading",children:"Instructions"}),Object(o.jsx)("p",{children:e.props.children})]})},e}return n}(i.Component),F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.createMesh(),a.applyMaterial(),a.startSpawnAnimation()},a.componentWillUnmount=function(){a.mesh.dispose()},a.createMesh=function(){var e=a.props.posX?a.props.posX:0,t=a.props.posY?a.props.posY:0,n=a.props.posZ?a.props.posZ:0;a.mesh=b.MeshBuilder.CreateBox("objectivePoint_".concat(e,",").concat(t,",").concat(n),{height:1,width:1,depth:1},O.scene),a.mesh.position.x=e,a.mesh.position.y=t,a.mesh.position.z=n},a.applyMaterial=function(){var e=new b.StandardMaterial("StoneBlockMaterial",O.scene);e.specularColor=new b.Color3(0,0,0),e.backFaceCulling=!1},a.startSpawnAnimation=function(){var e=new b.Animation("spawnAnimation","scaling",O.framerate,b.Animation.ANIMATIONTYPE_VECTOR3,b.Animation.ANIMATIONLOOPMODE_CYCLE),t=.2*((a.props.yOffset?a.props.yOffset:0)+(a.props.posY?a.props.posY:0))+1,n=[];n.push({frame:0,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate,value:b.Vector3.Zero()}),n.push({frame:t*O.framerate+.3*O.framerate,value:b.Vector3.One()}),e.setKeys(n),a.mesh.animations.push(e),O.scene.beginAnimation(a.mesh,0,t*O.framerate+.3*O.framerate,!1)},a.render=function(){return Object(o.jsx)("div",{})},a.mesh=void 0,a}return n}(i.Component),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={environmentSpawned:!1},a.level=[[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]],[[0,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0]],[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1],[1,1,1,1,1]],[[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,99],[0,0,0,0,0],[0,0,0,0,0]]],a.yOffset=3,O.currentLevel=Object(x.a)(a),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"spawnEnvironmentItem",value:function(e,t,n,a){switch(t-=this.yOffset,a){case C.NONE:return Object(o.jsx)("div",{});case C.STONE:return Object(o.jsx)(k,{posX:e,posY:t,posZ:n,yOffset:this.yOffset});case C.GRASS:return Object(o.jsx)(A,{posX:e,posY:t,posZ:n,yOffset:this.yOffset});case C.OBJECTIVE:return Object(o.jsx)(F,{posX:e,posY:t,posZ:n,yOffset:this.yOffset});default:return Object(o.jsx)("div",{})}}},{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"levelPanel",children:[Object(o.jsx)(Y,{heading:"Level One",subheading:"The Basics"}),Object(o.jsx)(D,{yOffset:this.yOffset}),Object(o.jsxs)(_,{children:[Object(o.jsx)("b",{children:"Welcome to your first level!"}),Object(o.jsx)("br",{}),"To complete this level, you need to walk the character to the finish line using functions. To add a function, press the plus button above."]})]}),this.level.map((function(t,n){return Object(o.jsxs)("div",{className:"env_y_".concat(n),children:[" ",t.map((function(t,a){return Object(o.jsxs)("div",{className:"env_x_".concat(a),children:[" ",t.map((function(t,r){return Object(o.jsxs)("div",{className:"env_z_".concat(r),children:[" ",e.spawnEnvironmentItem(a,n,r,t)," "]},r)}))," "]},a)}))," "]},n)})),Object(o.jsx)(y,{posX:0,posY:1,posZ:0,yOffset:this.yOffset,faceDirection:2}),Object(o.jsx)("button",{"data-toggle":"modal","data-target":"#addBlockModal",className:"btn btn-sm text-white btn-success mr-2",children:"TEST ADD BLOCK MODAL"})]})}}]),n}(i.Component),W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsxs)(f.a,{children:[Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(v,{}),Object(o.jsxs)("ul",{style:{color:"white"},children:[Object(o.jsx)("li",{children:"Show Debugger: ["}),Object(o.jsx)("li",{children:"Hide Debugger: ]"}),Object(o.jsx)("li",{children:Object(o.jsx)(f.b,{to:"/cg-final-project/",children:"Load Main Menu"})}),Object(o.jsx)("li",{children:Object(o.jsx)(f.b,{to:"/cg-final-project/level-1",children:"Load Level 1"})})]}),Object(o.jsxs)("div",{className:"AppContainer",children:[Object(o.jsx)(j,{}),Object(o.jsx)(m.c,{className:"LevelContainer",children:Object(o.jsx)(m.a,{path:"/cg-final-project/level-1",children:Object(o.jsx)(V,{})})})]})]}),Object(o.jsx)(g,{})]})}}]),n}(i.Component),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))};p.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(W,{})}),document.getElementById("root")),K()}},[[42,1,2]]]);
//# sourceMappingURL=main.b6b9fbc3.chunk.js.map